.container {
  position: relative;
  height: 120px;
  margin: 10rem auto;
  max-width: 200px;
  overflow: visible;
  animation: fadeOutContainer 90s forwards;
}

.stack {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}

.book {
  position: absolute;
  animation: humanPickup 10s ease-in-out var(--delay) forwards;
  opacity: 1;
  z-index: var(--z-index);
  /* Books start with random angles in the stack */
  transform: 
    translate(var(--offset-x), var(--offset-y)) 
    rotate(var(--stack-rotation))
    scale(1);
}

.bookCover {
  width: 60px;
  height: 80px;
  object-fit: cover;
  border-radius: 4px;
  box-shadow: 
    0 4px 12px rgba(0,0,0,0.3),
    0 2px 4px rgba(0,0,0,0.2);
}

/* Human-like book pickup animation with two phases */
@keyframes humanPickup {
  /* PHASE 1: FAST PICKUP - Book sits in stack at random angle */
  0% {
    opacity: 1;
    transform: 
      translate(var(--offset-x), var(--offset-y)) 
      rotate(var(--stack-rotation))
      scale(1);
  }
  
  /* Fast pickup - book rotates to vertical */
  15% {
    opacity: 1;
    transform: 
      translate(var(--offset-x), var(--offset-y)) 
      rotate(0deg)
      scale(1.2);
  }
  
  /* Book gets closer (bigger) - end of pickup phase */
  30% {
    opacity: 1;
    transform: 
      translate(var(--offset-x), var(--offset-y)) 
      rotate(0deg)
      scale(1.6);
  }
  
  /* PHASE 2: MEDIUM TOSS - Start flying away with some spin */
  70% {
    opacity: 1;
    transform: 
      translate(
        calc(var(--offset-x) + var(--fly-x) * 0.6), 
        calc(var(--offset-y) + var(--fly-y) * 0.6)
      ) 
      rotate(var(--final-rotation))
      scale(1.2);
  }
  
  /* Fade out while flying far away */
  100% {
    opacity: 0;
    transform: 
      translate(
        calc(var(--offset-x) + var(--fly-x)), 
        calc(var(--offset-y) + var(--fly-y))
      ) 
      rotate(calc(var(--final-rotation) + 180deg))
      scale(0.8);
  }
}

/* Remove container margins at the end */
@keyframes fadeOutContainer {
  0%, 90% {
    margin: 10rem auto;
    height: 120px;
  }
  100% {
    margin: 0;
    height: 0;
  }
}

/* Mobile responsive */
@media screen and (max-width: 768px) {
  .container {
    height: 100px;
    max-width: 150px;
    margin: 8rem auto;
  }
  
  .bookCover {
    width: 45px;
    height: 60px;
  }
  
  @keyframes fadeOutContainer {
    0%, 90% {
      margin: 8rem auto;
      height: 100px;
    }
    100% {
      margin: 0;
      height: 0;
    }
  }
}

@media screen and (max-width: 480px) {
  .container {
    height: 80px;
    max-width: 120px;
    margin: 6rem auto;
  }
  
  .bookCover {
    width: 35px;
    height: 50px;
  }
  
  @keyframes fadeOutContainer {
    0%, 90% {
      margin: 6rem auto;
      height: 80px;
    }
    100% {
      margin: 0;
      height: 0;
    }
  }
}

/* Accessibility: reduced motion */
@media (prefers-reduced-motion: reduce) {
  .book {
    animation: none;
    opacity: 1;
    position: static;
    display: inline-block;
    margin: 0.25rem;
    transform: none !important;
  }
  
  .container {
    height: auto;
    max-width: none;
    margin: 2rem auto;
    animation: none;
  }
  
  .stack {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.5rem;
  }
}

.wrapper {
  position: relative;
  height: 180px;
  margin: 2rem 0;
  overflow: visible;
  border-radius: 16px;
  background: transparent;
}








